<!DOCTYPE html><html>    <head>        <style>            body {                background-color: black;                color: white;                font-size: 24pt;                font-family: consolas;            }         </style>    <meta charset="utf-8">    <script>        function roundedRect2(ctx, x, y, width, height, radius, fill, left, right, top, bottom) {            ctx.beginPath();            ctx.moveTo(x + radius, y);                        if (top) {                ctx.arcTo(x + width, y, x + width, y + radius, radius);            } else {                ctx.lineTo(x + width, y);                ctx.lineTo(x + width, y + radius);            }            if (right) {                ctx.arcTo(x + width, y + height, x + width - radius, y + height, radius);            } else {                ctx.lineTo(x + width, y + height);                ctx.lineTo(x + width - radius, y + height);            }                        if (bottom)  {                ctx.arcTo(x, y + height, x, y + height - radius, radius);            } else {                 ctx.lineTo(x, y + height);                ctx.lineTo(x, y + height - radius);            }            if (left) {                ctx.arcTo(x, y, x + radius, y, radius);            } else {                ctx.lineTo(x, y);                ctx.lineTo(x + radius, y);            }            if (fill) {                ctx.fillStyle = "white";                ctx.fill();            } else {                ctx.fillStyle = "black";                ctx.fill();            }            ctx.strokeStyle = "white";            ctx.stroke();        }                function roundedRect(ctx, x, y, width, height, radius, fill) {            roundedRect2(ctx, x, y, width, height, radius, fill, true, true, true, true);        }        function drawTest(ctx, x, y, w, h) {            var width = 4;            roundedRect2(ctx, x, y, w, h, 4, true,                         true, false, false, true); //            roundedRect2(ctx, x + width + w, y, w, h, 4, true,//                         true, false, true, false); //            roundedRect2(ctx, x + width * 2 * w * 2, y, w, h, 4, true,//                         false, true, false, true); //            roundedRect2(ctx, x + width * 3 * w * 3, y, w, h, 4, true,//                         true, true, false, false);         };        window.onload = function () {            keyWidth = 32;            keyGap = 8;            const ws = new WebSocket("ws://localhost:9160");            const canvas = document.getElementById("canvas");            const ctx = canvas.getContext("2d");            ctx.translate(0.5,0.5);            ctx.lineWidth = 2;             //msg = document.getElementById("msg");            var keyStates = {};            const handler = {                get(obj, key) {                    return obj.hasOwnProperty(key) ? obj[key] : false;                },            };                        var proxyKeyStates = new Proxy(keyStates, handler );            drawKeys = function() {                 ctx.clearRect(0, 0, canvas.width, canvas.height);                // space                roundedRect2(ctx, keyWidth * 2 + keyGap * 3, keyWidth * 2 + keyGap * 3, keyWidth * 2 + keyGap * 3, keyWidth, 2, proxyKeyStates["KeySpace"],                             true, false, false, true);                                roundedRect(ctx, keyWidth * 0.3125 * 1 + keyGap * 1, keyWidth * 0.3125 + keyGap, keyWidth * 0.66, keyWidth * 0.66, 2, proxyKeyStates["KeyQ"]);                roundedRect(ctx, keyWidth * 1 + keyGap * 2, keyGap                   , keyWidth, keyWidth, 2, proxyKeyStates["KeyW"]);                roundedRect(ctx, keyWidth * 2 + keyGap * 3, keyWidth * 0.3125 + keyGap, keyWidth * 0.66, keyWidth * 0.66, 2, proxyKeyStates["KeyE"]);                roundedRect(ctx, keyGap                   , keyWidth * 1 + keyGap * 2, keyWidth, keyWidth, 2, proxyKeyStates["KeyW"]);                roundedRect(ctx, keyWidth * 1 + keyGap * 2, keyWidth * 1 + keyGap * 2, keyWidth, keyWidth, 2, proxyKeyStates["KeyS"]);                roundedRect(ctx, keyWidth * 2 + keyGap * 3, keyWidth * 1 + keyGap * 2, keyWidth, keyWidth, 2, proxyKeyStates["KeyD"]);                roundedRect(ctx, keyWidth * 3 + keyGap * 5, keyWidth * 1 + keyGap * 2, keyWidth, keyWidth, 2, proxyKeyStates["KeyF"]);                // mouse                roundedRect(ctx, keyWidth * 4 + keyGap * 7, keyGap, keyWidth * 2 + keyGap, keyWidth * 3 + keyGap * 2, 12, false);                roundedRect2(ctx, keyWidth * 4 + keyGap * 7, keyGap, keyWidth, keyWidth * 1 + keyGap * 1, 12, proxyKeyStates["BtnLeft"], true, false, false, true);                roundedRect2(ctx, keyWidth * 5 + keyGap * 8, keyGap, keyWidth, keyWidth * 1 + keyGap * 1, 12, proxyKeyStates["BtnRight"], false, true, true, false);                // middle mouse                roundedRect(ctx, keyWidth * 5 + keyGap * 6.5, keyGap, keyWidth / 2, keyWidth, 2, proxyKeyStates["BtnMiddle"]);            }            drawKeys();            //drawTest(ctx, 3, 3, 32, 32);            ws.onmessage = function(event) {                console.log(event.data);                //msg.innerHTML = event.data;                state = event.data.split("::");                                if (state[1] == "Pressed") {                    keyStates[state[0]] = true;                } else {                    keyStates[state[0]] = false;                }                drawKeys();            };        };    </script>    </head><body><!--     <span id="msg"> </span> <br /> -->    <canvas id="canvas" width="264px" height="132px"> </canvas></body></html>